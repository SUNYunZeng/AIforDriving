{"version":3,"sources":["webpack:///./src/utils/traj-handler.js","webpack:///src/views/Prediction.vue","webpack:///./src/views/Prediction.vue?96a8","webpack:///./src/views/Prediction.vue","webpack:///src/components/commom/EChartsMap.vue","webpack:///./src/components/commom/EChartsMap.vue?3422","webpack:///./src/components/commom/EChartsMap.vue","webpack:///./src/utils/myAjax.js"],"names":["process","data","user","JSON","parse","trajectory","norm_dict","eval","_ref","lngs","lats","_ref2","_ref3","Math","min","apply","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","max","min_lng","max_lat","max_lng","min_lat","center","dec_loc","boundingbox","i","length","push","wgs84togcj02tobd09","record","destination","lng","lat","xPI","PI","a","ee","dlat","transformlat","dlng","transformlng","radlat","magic","sin","sqrtmagic","sqrt","mglat","mglng","cos","z","theta","atan2","ret","abs","__webpack_exports__","name","max_id","this","$isOnServer","formInline","cut_size","slider_max","id","move_value","is_dynamic","real_dest","pre_dests","bmap","__WEBPACK_IMPORTED_MODULE_2__store__","state","mapconfig","zoom","roam","mapStyle","option","tooltip","trigger","series","myChart","lines_option","mounted","methods","change","getAjax","Object","__WEBPACK_IMPORTED_MODULE_3__utils_myAjax__","tableName","requireRes","handleSubmit","_this","parseInt","$Message","info","then","traj","RECORDS","_process","__WEBPACK_IMPORTED_MODULE_4__utils_traj_handler__","lines","coords","lineStyle","normal","color","type","coordinateSystem","polyline","silent","opacity","width","progressiveThreshold","progressive","effect","constantSpeed","show","trailLength","symbolSize","zlevel","value","showEffectOn","rippleEffect","brushType","hoverAnimation","formatter","itemStyle","shadowBlur","shadowColor","pre_dest","undefined","res","concat","success","catch","err","error","toString","draw","predict","format","val","toFixed","components","EChartsMap","__WEBPACK_IMPORTED_MODULE_1__components_commom_EChartsMap__","views_Prediction","render","_vm","_h","$createElement","_c","_self","ref","attrs","model","inline","_v","staticStyle","callback","$$v","expression","editable","clearable","$set","disabled","on","click","step","tip-format","show-tip","show-stops","on-change","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Prediction","echarts","props","watch","_option","setOption","init","$el","store","commom_EChartsMap","staticClass","order","arguments","axios","post","bUrl","headers","Content-Type","url","get","__WEBPACK_IMPORTED_MODULE_0_axios__","__WEBPACK_IMPORTED_MODULE_0_axios___default","n","__WEBPACK_IMPORTED_MODULE_1__store__"],"mappings":"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","file":"static/js/0.e10001ba0fe0a80728fa.js","sourcesContent":["import store from '@/store';\n\nexport function process (data) {\n  // json转换\n  let user = typeof data === 'string' ? JSON.parse(data)[0] : data[0];\n  let trajectory = [];\n  let norm_dict = eval(user.norm_dict);\n  let [lngs, lats] = [eval(user.lngs), eval(user.lats)];\n  [user.lngs, user.lats] = [lngs, lats];\n  let [min_lng, max_lat, max_lng, min_lat] = [Math.min(...lngs), Math.max(...lats), Math.max(...lngs), Math.min(...lats)];\n  let center = dec_loc(norm_dict, (max_lng + min_lng) / 2, (max_lat + min_lat) / 2);\n  // 定位范围，左上角与右上角\n\n  let boundingbox = [dec_loc(norm_dict, min_lng, max_lat), dec_loc(norm_dict, max_lng, min_lat)];\n  for (let i = 0; i < lngs.length; i++) {\n    trajectory.push(wgs84togcj02tobd09(...dec_loc(norm_dict, lngs[i], lats[i])));\n  }\n  return {\n    record: user,\n    trajectory: trajectory,\n    boundingbox: boundingbox,\n    center: center,\n    destination: trajectory[trajectory.length-1]\n  };\n}\n\nlet dec_loc = (norm_dict, lng, lat) =>\n  [lng * norm_dict[1] + norm_dict[0], lat * norm_dict[3] + norm_dict[2]];\n\n/**\n * WGS84转GCj02\n * 火星坐标系 (GCJ-02) 与百度坐标系 (BD-09) 的转换\n * @param lng\n * @param lat\n * @returns {*[]}\n */\nexport function wgs84togcj02tobd09 (lng, lat) {\n  const xPI = 3.14159265358979324 * 3000.0 / 180.0;\n  const PI = 3.1415926535897932384626;\n  const a = 6378245.0;\n  const ee = 0.00669342162296594323;\n  // WGS84转GCj02\n  let dlat = transformlat(lng - 105.0, lat - 35.0);\n  let dlng = transformlng(lng - 105.0, lat - 35.0);\n  let radlat = lat / 180.0 * PI;\n  let magic = Math.sin(radlat);\n  magic = 1 - ee * magic * magic;\n  let sqrtmagic = Math.sqrt(magic);\n  dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);\n  dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);\n  let mglat = lat + dlat;\n  let mglng = lng + dlng;\n  // 火星坐标系 (GCJ-02) 与百度坐标系 (BD-09) 的转换\n  let z = Math.sqrt(mglng * mglng + mglat * mglat) + 0.00002 * Math.sin(mglat * xPI);\n  let theta = Math.atan2(mglat, mglng) + 0.000003 * Math.cos(mglng * xPI);\n  let bdlng = z * Math.cos(theta) + 0.0065;\n  let bdlat = z * Math.sin(theta) + 0.006;\n  // return [bdlng, bdlat]\n  return [bdlng, bdlat];\n}\n\nfunction transformlat (lng, lat) {\n  const PI = 3.1415926535897932384626;\n  let ret = -100.0 + 2.0 * lng + 3.0 * lat + 0.2 * lat * lat + 0.1 * lng * lat + 0.2 * Math.sqrt(Math.abs(lng));\n  ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;\n  ret += (20.0 * Math.sin(lat * PI) + 40.0 * Math.sin(lat / 3.0 * PI)) * 2.0 / 3.0;\n  ret += (160.0 * Math.sin(lat / 12.0 * PI) + 320 * Math.sin(lat * PI / 30.0)) * 2.0 / 3.0;\n  return ret;\n}\n\nfunction transformlng (lng, lat) {\n  const PI = 3.1415926535897932384626;\n  let ret = 300.0 + lng + 2.0 * lat + 0.1 * lng * lng + 0.1 * lng * lat + 0.1 * Math.sqrt(Math.abs(lng));\n  ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;\n  ret += (20.0 * Math.sin(lng * PI) + 40.0 * Math.sin(lng / 3.0 * PI)) * 2.0 / 3.0;\n  ret += (150.0 * Math.sin(lng / 12.0 * PI) + 300.0 * Math.sin(lng / 30.0 * PI)) * 2.0 / 3.0;\n  return ret;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/traj-handler.js","<template>\n  <div>\n    <Form ref=\"formInline\" :model=\"formInline\" inline>\n      <FormItem>\n        轨迹 ID:\n        <InputNumber style=\"width:70px\" :max=\"this.$isOnServer?2500:250\" :min=\"1\" v-model=\"id\"></InputNumber>\n      </FormItem>\n      <FormItem>\n        切分粒度:\n        <InputNumber :editable=\"false\" style=\"width:70px\" :max=\"1000\" :min=\"1\" v-model=\"cut_size\"></InputNumber>\n      </FormItem>\n      <FormItem>\n        测试用户: <Select v-model=\"user.name\" clearable style=\"width:70px\">\n        <Option value=\"user1\">User1</Option>\n        <Option value=\"user2\" disabled>User2</Option>\n        <Option value=\"user3\" disabled>User3</Option>\n        <Option value=\"user3\" disabled>User4</Option>\n      </Select>\n      </FormItem>\n      <FormItem style=\"width:70px\">\n        <Button type=\"primary\" @click=\"handleSubmit\">选择</Button>\n      </FormItem>\n      <FormItem>\n        <Divider type=\"vertical\"/>\n        旅程完成度:\n      </FormItem>\n      <FormItem style=\"width:305px\">\n        <Slider style=\"width:300px\" v-model=\"move_value\" :step=\"1\"\n                :max=\"slider_max\" :min=\"1\" :tip-format=\"format\"\n                show-tip=\"always\" show-stops></Slider>\n      </FormItem>\n      <FormItem style=\"width:110px\">\n        动态预测:\n        <i-switch v-model=\"is_dynamic\" @on-change=\"change\"/>\n      </FormItem>\n      <FormItem>\n        <Button :disabled=\"!this.$isOnServer\" type=\"primary\" @click=\"predict\">开始预测</Button>\n      </FormItem>\n    </Form>\n    <EChartsMap :option=\"option\"></EChartsMap>\n  </div>\n</template>\n\n<script>\n  import EChartsMap from '@/components/commom/EChartsMap';\n  import store from '@/store';\n  import {post, get} from '@/utils/myAjax';\n  import {process, wgs84togcj02tobd09} from '@/utils/traj-handler';\n\n  export default {\n    name: 'prediction',\n    data () {\n      return {\n        max_id : this.$isOnServer?2500:250,\n        formInline: {},\n        cut_size: 10,\n        slider_max: 10,\n        id: 100,\n        move_value: 1,\n        is_dynamic: false,\n        user: {\n          name: 'user1',\n          record: null,\n          trajectory: null,\n          real_dest: [],\n          pre_dests: [],\n        },\n        bmap: {\n          center: store.state.mapconfig.center,\n          zoom: 15,\n          roam: true,\n          mapStyle: store.state.mapStyle\n        },\n        option: {\n          bmap: this.bmap,\n          tooltip: {\n            trigger: 'item'\n          },\n          series: []\n        },\n        myChart: null,\n        lines_option: [],\n      };\n    },\n    mounted () {\n    },\n    methods: {\n      change () {\n\n      },\n      getAjax () {\n        if (this.$isOnServer) {\n          return post('searchByCol', {\n            id: this.id,\n            tableName: this.user.name,\n            requireRes: true\n          });\n        } else {\n          return get('../static/data/user_1.json');\n        }\n      },\n      handleSubmit () {\n        if(this.id<0 || this.id>this.max_id || this.id!==parseInt(this.id)){\n          this.$Message.info('id取值错误!');\n          this.id = 100;\n          return;\n        }\n        this.slider_max = this.cut_size;\n        this.getAjax().then((data) => {\n          let traj = this.$isOnServer ? data.traj : [data.RECORDS[parseInt(this.id)]];\n          let {trajectory, boundingbox, center, destination, record} = process(traj);\n          this.user.trajectory = trajectory;\n          this.user.record = record;\n          let lines = [{\n            coords: trajectory,\n            lineStyle: {\n              normal: {\n                color: 'orange'\n              }\n            }\n          }];\n          this.lines_option = [{\n            type: 'lines',\n            coordinateSystem: 'bmap',\n            polyline: true,\n            data: lines,\n            silent: true,\n            lineStyle: {\n              normal: {\n                opacity: 0.75,\n                width: 3\n              }\n            },\n            progressiveThreshold: 500,\n            progressive: 200\n          }, {\n            type: 'lines',\n            coordinateSystem: 'bmap',\n            polyline: true,\n            data: lines,\n            lineStyle: {\n              normal: {\n                width: 0\n              }\n            },\n            effect: {\n              constantSpeed: 40,\n              show: true,\n              trailLength: 0.3,\n              symbolSize: 3.5\n            },\n            zlevel: 1\n          }];\n          this.user.real_dest = [{\n            type: 'effectScatter',\n            coordinateSystem: 'bmap',\n            data: [{name: '目的地', value: destination}],\n            symbolSize: 20,\n            showEffectOn: 'render',\n            rippleEffect: {\n              brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            tooltip: {\n              trigger: 'item',\n              formatter: '{b}'\n            },\n            itemStyle: {\n              normal: {\n                color: '#12e78c',\n                shadowBlur: 10,\n                shadowColor: '#333'\n              }\n            },\n            zlevel: 2\n          }];\n          let pre_dest = this.$isOnServer ? [{\n            type: 'scatter',\n            coordinateSystem: 'bmap',\n            data: [{name: '预测点', value: wgs84togcj02tobd09(...eval(data.res))}],\n            symbolSize: 15,\n            tooltip: {\n              trigger: 'item',\n              formatter: '{b}'\n            },\n            itemStyle: {\n              normal: {\n                color: '#ff461f'\n              }\n            }\n          }] : [];\n          this.bmap.center = center;\n          this.option = {\n            bmap: this.bmap,\n            tooltip: {\n              trigger: 'item'\n            },\n            series: [...this.lines_option, ...this.user.real_dest, ...pre_dest]\n          };\n          this.$Message.success('预测结果：' + data.res);\n        }).catch((err) => this.$Message.error(err.toString()));\n      },\n      draw(option){\n        this.option = option;\n      },\n      predict () {\n        if (this.user.trajectory==null || this.user.record==null) {\n          this.$Message.info('没有数据');\n          return null;\n        }\n\n      },\n      format (val) {\n        return (val / this.slider_max * 100).toFixed(1) + '%';\n      }\n    },\n    components: {\n      EChartsMap\n    }\n  };\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Prediction.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.formInline,\"inline\":\"\"}},[_c('FormItem',[_vm._v(\"\\n      轨迹 ID:\\n      \"),_c('InputNumber',{staticStyle:{\"width\":\"70px\"},attrs:{\"max\":this.$isOnServer?2500:250,\"min\":1},model:{value:(_vm.id),callback:function ($$v) {_vm.id=$$v},expression:\"id\"}})],1),_vm._v(\" \"),_c('FormItem',[_vm._v(\"\\n      切分粒度:\\n      \"),_c('InputNumber',{staticStyle:{\"width\":\"70px\"},attrs:{\"editable\":false,\"max\":1000,\"min\":1},model:{value:(_vm.cut_size),callback:function ($$v) {_vm.cut_size=$$v},expression:\"cut_size\"}})],1),_vm._v(\" \"),_c('FormItem',[_vm._v(\"\\n      测试用户: \"),_c('Select',{staticStyle:{\"width\":\"70px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}},[_c('Option',{attrs:{\"value\":\"user1\"}},[_vm._v(\"User1\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user2\",\"disabled\":\"\"}},[_vm._v(\"User2\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user3\",\"disabled\":\"\"}},[_vm._v(\"User3\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user3\",\"disabled\":\"\"}},[_vm._v(\"User4\")])],1)],1),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"width\":\"70px\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"选择\")])],1),_vm._v(\" \"),_c('FormItem',[_c('Divider',{attrs:{\"type\":\"vertical\"}}),_vm._v(\"\\n      旅程完成度:\\n    \")],1),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"width\":\"305px\"}},[_c('Slider',{staticStyle:{\"width\":\"300px\"},attrs:{\"step\":1,\"max\":_vm.slider_max,\"min\":1,\"tip-format\":_vm.format,\"show-tip\":\"always\",\"show-stops\":\"\"},model:{value:(_vm.move_value),callback:function ($$v) {_vm.move_value=$$v},expression:\"move_value\"}})],1),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"width\":\"110px\"}},[_vm._v(\"\\n      动态预测:\\n      \"),_c('i-switch',{on:{\"on-change\":_vm.change},model:{value:(_vm.is_dynamic),callback:function ($$v) {_vm.is_dynamic=$$v},expression:\"is_dynamic\"}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"disabled\":!this.$isOnServer,\"type\":\"primary\"},on:{\"click\":_vm.predict}},[_vm._v(\"开始预测\")])],1)],1),_vm._v(\" \"),_c('EChartsMap',{attrs:{\"option\":_vm.option}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-317da8d5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Prediction.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-317da8d5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Prediction.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Prediction.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Prediction.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-317da8d5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Prediction.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-317da8d5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Prediction.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"bmap\"></div>\n</template>\n\n<script>\n  import store from '@/store';\n  let echarts = require('echarts');\n  export default {\n    name: 'EChartsMap',\n    props: ['option'],\n    watch:{\n      option: function (option) {\n        this.myChart.setOption(option);\n      }\n    },\n    data(){\n      return {\n        myChart: null\n      }\n    },\n    mounted(){\n      this.draw();\n    },\n    methods: {\n      draw () {\n        this.myChart = echarts.init(this.$el);\n        this.myChart.setOption({\n          bmap:{\n            center: [114.03, 22.32],\n            zoom: 10,\n            roam: true,\n            mapStyle: store.state.mapStyle\n          }});\n      },\n    }\n  };\n</script>\n\n<style scoped>\n.bmap{\n  width: 100%;\n  height: calc(78vh);\n  position: relative;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/commom/EChartsMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bmap\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-72b8a829\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/commom/EChartsMap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-72b8a829\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EChartsMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EChartsMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EChartsMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72b8a829\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EChartsMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-72b8a829\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/commom/EChartsMap.vue\n// module id = null\n// module chunks = ","import axios from 'axios';\nimport store from '@/store';\n\nexport function post (order, option={}){\n  return axios.post(store.state.bUrl + order, option, {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n}\n\nexport function get (url) {\n  return axios.get(url);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/myAjax.js"],"sourceRoot":""}
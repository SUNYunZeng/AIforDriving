{"version":3,"sources":["webpack:///src/views/Prediction.vue","webpack:///./src/views/Prediction.vue?5a06","webpack:///./src/views/Prediction.vue","webpack:///src/components/commom/EChartsMap.vue","webpack:///./src/components/commom/EChartsMap.vue?3422","webpack:///./src/components/commom/EChartsMap.vue"],"names":["__webpack_exports__","name","data","max_id","this","$isOnServer","formInline","cut_size","slider_max","id","move_value","is_dynamic","preable","dy","user","recordMap","trajectory","real_dest","pre_dests","center","boundingCoords","bmap","__WEBPACK_IMPORTED_MODULE_2__store__","state","mapconfig","zoom","roam","mapStyle","option","tooltip","trigger","series","myChart","lines","coords","lineStyle","normal","color","lines_option","type","coordinateSystem","polyline","silent","opacity","width","progressiveThreshold","progressive","lines_state","effect","constantSpeed","show","trailLength","symbolSize","zlevel","real_dest_option","value","showEffectOn","rippleEffect","brushType","hoverAnimation","formatter","itemStyle","shadowBlur","shadowColor","pre_dest_option","mounted","methods","change","clearInterval","getAjax","Object","__WEBPACK_IMPORTED_MODULE_3__utils_myAjax__","tableName","handleSubmit","_this2","parseInt","$Message","info","then","traj","RECORDS","_process","__WEBPACK_IMPORTED_MODULE_4__utils_traj_handler__","boundingbox","draw","catch","err","error","toString","pre_dest","push","predict","_this","flag","setInterval","len","Math","max","length","k","slice","do_predict","_this3","record","get","apply","undefined","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","eval","res","success","format","val","toFixed","components","EChartsMap","__WEBPACK_IMPORTED_MODULE_1__components_commom_EChartsMap__","views_Prediction","render","_vm","_h","$createElement","_c","_self","ref","attrs","model","inline","_v","staticStyle","min","callback","$$v","expression","editable","clearable","$set","disabled","on","click","step","tip-format","show-tip","show-stops","on-change","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Prediction","echarts","props","watch","_option","setOption","init","$el","store","commom_EChartsMap","staticClass"],"mappings":"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","file":"static/js/2.10b811bc545db134d5db.js","sourcesContent":["<template>\n  <div>\n    <Form ref=\"formInline\" :model=\"formInline\" inline>\n      <FormItem>\n        轨迹 ID:\n        <InputNumber style=\"width:70px\" :max=\"this.$isOnServer?2500:250\" :min=\"1\" v-model=\"id\"></InputNumber>\n      </FormItem>\n      <FormItem>\n        切分粒度:\n        <InputNumber :editable=\"false\" style=\"width:70px\" :max=\"30\" :min=\"1\" v-model=\"cut_size\"></InputNumber>\n      </FormItem>\n      <FormItem>\n        测试用户: <Select v-model=\"user.name\" clearable style=\"width:70px\">\n        <Option value=\"user1\">User1</Option>\n        <Option value=\"user2\" :disabled=\"!this.$isOnServer\">User2</Option>\n        <Option value=\"user3\" :disabled=\"!this.$isOnServer\">User3</Option>\n        <Option value=\"user4\" :disabled=\"!this.$isOnServer\">User4</Option>\n      </Select>\n      </FormItem>\n      <FormItem style=\"width:70px\">\n        <Button type=\"primary\" @click=\"handleSubmit\">选择</Button>\n      </FormItem>\n      <FormItem>\n        <Divider type=\"vertical\"/>\n        旅程完成度:\n      </FormItem>\n      <FormItem style=\"width:305px\">\n        <Slider style=\"width:300px\" v-model=\"move_value\" :step=\"1\"\n                :max=\"slider_max\" :min=\"1\" :tip-format=\"format\"\n                show-tip=\"always\" show-stops></Slider>\n      </FormItem>\n      <FormItem style=\"width:110px\">\n        动态预测:\n        <i-switch v-model=\"is_dynamic\" @on-change=\"change\"/>\n      </FormItem>\n      <FormItem>\n        <Button type=\"primary\" :disabled=\"preable\" @click=\"predict\">开始预测</Button>\n      </FormItem>\n    </Form>\n    <EChartsMap :option=\"option\"></EChartsMap>\n  </div>\n</template>\n\n<script>\n  import EChartsMap from '@/components/commom/EChartsMap';\n  import store from '@/store';\n  import {post, get} from '@/utils/myAjax';\n  import {process, wgs84togcj02tobd09} from '@/utils/traj-handler';\n\n  export default {\n    name: 'prediction',\n    data () {\n      return {\n        max_id: this.$isOnServer ? 2500 : 250,\n        formInline: {},\n        cut_size: 10,\n        slider_max: 10,\n        id: 100,\n        move_value: 1,\n        is_dynamic: false,\n        preable: false,\n        dy: null,\n        user: {\n          name: 'user1',\n          recordMap: null,\n          trajectory: null,\n          real_dest: [],\n          pre_dests: {},\n          center: [],\n          boundingCoords: []\n        },\n        bmap: {\n          center: store.state.mapconfig.center,\n          boundingCoords: [],\n          zoom: 15,\n          roam: true,\n          mapStyle: store.state.mapStyle\n        },\n        option: {\n          bmap: this.bmap,\n          tooltip: {\n            trigger: 'item'\n          },\n          series: []\n        },\n        myChart: null,\n        lines: {\n          coords: [],\n          lineStyle: {\n            normal: {\n              color: 'orange'\n            }\n          }\n        },\n        lines_option: {\n          type: 'lines',\n          coordinateSystem: 'bmap',\n          polyline: true,\n          data: [],\n          silent: true,\n          lineStyle: {\n            normal: {\n              opacity: 0.75,\n              width: 3\n            }\n          },\n          progressiveThreshold: 500,\n          progressive: 200\n        },\n        lines_state: {\n          type: 'lines',\n          coordinateSystem: 'bmap',\n          polyline: true,\n          data: [],\n          lineStyle: {\n            normal: {\n              width: 0\n            }\n          },\n          effect: {\n            constantSpeed: 40,\n            show: true,\n            trailLength: 0.3,\n            symbolSize: 3.5\n          },\n          zlevel: 1\n        },\n        real_dest_option: {\n          type: 'effectScatter',\n          coordinateSystem: 'bmap',\n          data: [{name: '目的地', value: []}],\n          symbolSize: 20,\n          showEffectOn: 'render',\n          rippleEffect: {\n            brushType: 'stroke'\n          },\n          hoverAnimation: true,\n          tooltip: {\n            trigger: 'item',\n            formatter: '{b}'\n          },\n          itemStyle: {\n            normal: {\n              color: '#12e78c',\n              shadowBlur: 10,\n              shadowColor: '#333'\n            }\n          },\n          zlevel: 2\n        },\n        pre_dest_option: {\n          type: 'effectScatter',\n          coordinateSystem: 'bmap',\n          data: [{name: '预测点', value: []}],\n          symbolSize: 15,\n          showEffectOn: 'render',\n          rippleEffect: {\n            brushType: 'fill'\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: '{b}'\n          },\n          itemStyle: {\n            normal: {\n              color: '#ff461f',\n              shadowBlur: 7,\n              shadowColor: '#333'\n            }\n          },\n          zlevel: 3\n        }\n      };\n    },\n    mounted () {\n    },\n    methods: {\n      change () {\n        if (!this.is_dynamic && this.dy != null) {\n          clearInterval(this.dy);\n          this.preable = false;\n        }\n      },\n      getAjax () {\n        if (this.$isOnServer) {\n          return post('searchByCol', {\n            id: this.id,\n            tableName: this.user.name\n          });\n        } else {\n          return get('../static/data/user_1.json');\n        }\n      },\n      handleSubmit () {\n        if (this.id < 0 || this.id > this.max_id || this.id !== parseInt(this.id)) {\n          this.$Message.info('id取值错误!');\n          this.id = 100;\n          return;\n        }\n        this.slider_max = this.cut_size;\n        this.getAjax().then((data) => {\n          let traj = this.$isOnServer ? data : [data.RECORDS[parseInt(this.id)]];\n          let {trajectory, boundingbox, center, real_dest, recordMap} = process(traj, this.cut_size);\n          this.user.recordMap = recordMap;\n          this.user.trajectory = trajectory;\n          this.user.center = center;\n          this.user.boundingCoords = boundingbox;\n          this.user.real_dest = real_dest;\n\n          this.draw(trajectory, real_dest, center, boundingbox, []);\n        }).catch((err) => this.$Message.error(err.toString()));\n      },\n      draw (trajectory, real_dest, center, boundingbox, pre_dest) {\n        this.lines.coords = trajectory;\n        this.lines_option.data = [this.lines];\n        this.lines_state.data = [this.lines];\n        this.real_dest_option.data = [{name: '目的地', value: this.user.real_dest}];\n        this.pre_dest_option.data = [{name: '预测点', value: pre_dest}];\n        let series = [this.lines_option, this.lines_state, this.real_dest_option,];\n        if (this.$isOnServer) {\n          series.push(this.pre_dest_option);\n        }\n        let option = {\n          tooltip: {\n            trigger: 'item'\n          },\n          series: series\n        };\n        if(this.bmap.center.toString()!== center.toString()){\n          this.bmap.center = center;\n          this.bmap.boundingCoords = boundingbox;\n          option['bmap'] = this.bmap;\n        }\n        this.option = option;\n      },\n      predict () {\n        if (this.user.trajectory == null || this.user.recordMap == null) {\n          this.$Message.info('没有数据');\n          return null;\n        }\n        if (this.is_dynamic) {\n          this.preable = true;\n          let _this = this;\n          let flag = false;\n          this.dy = setInterval(function () {\n            if(flag){\n              _this.move_value += 1;\n            }\n            if (_this.move_value >= _this.slider_max) {\n              _this.move_value = 0;\n            }\n            let len = Math.max(2, parseInt(_this.move_value / _this.cut_size * _this.user.trajectory.length - 1));\n            let k = '' + _this.move_value;\n            if (k in _this.user.pre_dests) {\n              _this.draw(_this.user.trajectory.slice(0, len), _this.user.real_dest,\n                _this.user.center, _this.user.boundingCoords, _this.user.pre_dests[k]);\n            } else {\n              _this.do_predict();\n            }\n            flag = true;\n          }, 3000);\n        } else {\n          this.do_predict();\n        }\n      },\n      do_predict () {\n        let len = Math.max(2, parseInt(this.move_value / this.cut_size * this.user.trajectory.length - 1));\n        if (this.$isOnServer) {\n          post('predictor', {\n            record: this.user.recordMap.get(this.move_value),\n            user: this.user.name\n          }).then((data) => {\n            let pre_dest = wgs84togcj02tobd09(...eval(data.res));\n            this.draw(this.user.trajectory.slice(0, len), this.user.real_dest,\n              this.user.center, this.user.boundingCoords, pre_dest);\n            this.$Message.success('预测结果：' + pre_dest);\n          });\n        }else {\n          this.draw(this.user.trajectory.slice(0, len),\n            this.user.real_dest,this.user.center, this.user.boundingCoords);\n        }\n      },\n      format (val) {\n        return (val / this.slider_max * 100).toFixed(1) + '%';\n      }\n    },\n    components: {\n      EChartsMap\n    }\n  };\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Prediction.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.formInline,\"inline\":\"\"}},[_c('FormItem',[_vm._v(\"\\n      轨迹 ID:\\n      \"),_c('InputNumber',{staticStyle:{\"width\":\"70px\"},attrs:{\"max\":this.$isOnServer?2500:250,\"min\":1},model:{value:(_vm.id),callback:function ($$v) {_vm.id=$$v},expression:\"id\"}})],1),_vm._v(\" \"),_c('FormItem',[_vm._v(\"\\n      切分粒度:\\n      \"),_c('InputNumber',{staticStyle:{\"width\":\"70px\"},attrs:{\"editable\":false,\"max\":30,\"min\":1},model:{value:(_vm.cut_size),callback:function ($$v) {_vm.cut_size=$$v},expression:\"cut_size\"}})],1),_vm._v(\" \"),_c('FormItem',[_vm._v(\"\\n      测试用户: \"),_c('Select',{staticStyle:{\"width\":\"70px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}},[_c('Option',{attrs:{\"value\":\"user1\"}},[_vm._v(\"User1\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user2\",\"disabled\":!this.$isOnServer}},[_vm._v(\"User2\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user3\",\"disabled\":!this.$isOnServer}},[_vm._v(\"User3\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user4\",\"disabled\":!this.$isOnServer}},[_vm._v(\"User4\")])],1)],1),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"width\":\"70px\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"选择\")])],1),_vm._v(\" \"),_c('FormItem',[_c('Divider',{attrs:{\"type\":\"vertical\"}}),_vm._v(\"\\n      旅程完成度:\\n    \")],1),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"width\":\"305px\"}},[_c('Slider',{staticStyle:{\"width\":\"300px\"},attrs:{\"step\":1,\"max\":_vm.slider_max,\"min\":1,\"tip-format\":_vm.format,\"show-tip\":\"always\",\"show-stops\":\"\"},model:{value:(_vm.move_value),callback:function ($$v) {_vm.move_value=$$v},expression:\"move_value\"}})],1),_vm._v(\" \"),_c('FormItem',{staticStyle:{\"width\":\"110px\"}},[_vm._v(\"\\n      动态预测:\\n      \"),_c('i-switch',{on:{\"on-change\":_vm.change},model:{value:(_vm.is_dynamic),callback:function ($$v) {_vm.is_dynamic=$$v},expression:\"is_dynamic\"}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.preable},on:{\"click\":_vm.predict}},[_vm._v(\"开始预测\")])],1)],1),_vm._v(\" \"),_c('EChartsMap',{attrs:{\"option\":_vm.option}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-010a4d81\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Prediction.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-010a4d81\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Prediction.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Prediction.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Prediction.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-010a4d81\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Prediction.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-010a4d81\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Prediction.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"bmap\"></div>\n</template>\n\n<script>\n  import store from '@/store';\n  let echarts = require('echarts');\n  export default {\n    name: 'EChartsMap',\n    props: ['option'],\n    watch:{\n      option: function (option) {\n        this.myChart.setOption(option);\n      }\n    },\n    data(){\n      return {\n        myChart: null\n      }\n    },\n    mounted(){\n      this.draw();\n    },\n    methods: {\n      draw () {\n        this.myChart = echarts.init(this.$el);\n        this.myChart.setOption({\n          bmap:{\n            center: [114.03, 22.32],\n            zoom: 10,\n            roam: true,\n            mapStyle: store.state.mapStyle\n          }});\n      },\n    }\n  };\n</script>\n\n<style scoped>\n.bmap{\n  width: 100%;\n  height: calc(78vh);\n  position: relative;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/commom/EChartsMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bmap\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-72b8a829\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/commom/EChartsMap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-72b8a829\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EChartsMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EChartsMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EChartsMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72b8a829\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EChartsMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-72b8a829\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/commom/EChartsMap.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([4],{ZALZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),i=a.n(n),r=a("loSv"),s=a("KwgN"),o=a("vlla"),l=a("IcnI"),c={name:"trajectory",data:function(){return{user:"user1",time_range:["2018-01-01 00:00:00","2018-01-31:00:00:00"],is_dynamic:!1,preable:!1,dy:null,bmap:{center:l.a.state.mapconfig.center,boundingCoords:[],zoom:12,roam:!0,mapStyle:l.a.state.mapStyle},myChart:null,option:{bmap:this.bmap,tooltip:{trigger:"item"},series:[]},lines_option:{type:"lines",coordinateSystem:"bmap",polyline:!0,data:[],silent:!0,lineStyle:{normal:{opacity:.6,width:1}},progressiveThreshold:500,progressive:200},lines_state:{type:"lines",coordinateSystem:"bmap",polyline:!0,data:[],lineStyle:{normal:{width:0}},effect:{constantSpeed:20,show:!0,trailLength:.1,symbolSize:1.5},zlevel:1}}},methods:{show:function(){var t=this;this.$isOnServer?Object(o.b)("searchByRow",{rowName:["lngs","lats","line_id","norm_dict"],time:this.time_range,tableName:this.user}).then(function(e){if(e.length>0){var a=Object(s.a)(e);t.is_dynamic?t.dy_move(0,a):t.draw(a)}else t.$Message.info("空数据")}):Object(o.a)("../static/data/user_1.json").then(function(e){if(e.RECORDS.length>0){var a=[],n=e.RECORDS,r=!0,o=!1,l=void 0;try{for(var c,m=i()(n);!(r=(c=m.next()).done);r=!0){var d=c.value,h=new Date(d.time);h>=t.time_range[0]&&h<=t.time_range[1]&&a.push(d)}}catch(t){o=!0,l=t}finally{try{!r&&m.return&&m.return()}finally{if(o)throw l}}t.is_dynamic?t.dy_move(0,Object(s.a)(a)):t.draw(Object(s.a)(a))}else t.$Message.info("空数据")})},dy_move:function(t,e){t>e.length-1&&(t=0),this.preable=!0;var a=this;this.dy=setInterval(function(){a.draw({data:[e.data[t]],center:e.center}),t+=1},1500)},draw:function(t){this.lines_option.data=t.data,this.lines_state.data=t.data;var e={tooltip:{trigger:"item"},series:[this.lines_option,this.lines_state]};this.bmap.center.toString()!==t.center.toString()&&(this.bmap.center=t.center,e.bmap=this.bmap),this.option=e},change:function(){this.is_dynamic||null==this.dy||(clearInterval(this.dy),this.preable=!1)}},mounted:function(){},components:{EChartsMap:r.a}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formInline",attrs:{inline:""}},[a("FormItem",[t._v("\n      测试用户: "),a("Select",{staticStyle:{width:"70px"},attrs:{clearable:""},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}},[a("Option",{attrs:{value:"user1"}},[t._v("User1")]),t._v(" "),a("Option",{attrs:{value:"user2",disabled:!this.$isOnServer}},[t._v("User2")]),t._v(" "),a("Option",{attrs:{value:"user3",disabled:!this.$isOnServer}},[t._v("User3")]),t._v(" "),a("Option",{attrs:{value:"user4",disabled:!this.$isOnServer}},[t._v("User4")])],1)],1),t._v(" "),a("FormItem",[a("b",[t._v("出发时间:")])]),t._v(" "),a("FormItem",[a("DatePicker",{staticStyle:{width:"300px"},attrs:{"start-date":new Date("2018-01-01 00:00:00"),type:"datetimerange"},model:{value:t.time_range,callback:function(e){t.time_range=e},expression:"time_range"}})],1),t._v(" "),a("FormItem",{staticStyle:{width:"110px"}},[t._v("\n      时序观察:\n      "),a("i-switch",{on:{"on-change":t.change},model:{value:t.is_dynamic,callback:function(e){t.is_dynamic=e},expression:"is_dynamic"}})],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary",disabled:t.preable},on:{click:t.show}},[t._v("展示")])],1)],1),t._v(" "),a("EChartsMap",{attrs:{option:t.option}})],1)},staticRenderFns:[]};var d=a("VU/8")(c,m,!1,function(t){a("o84s")},"data-v-0eefc566",null);e.default=d.exports},eHsE:function(t,e){},loSv:function(t,e,a){"use strict";var n=a("IcnI"),i=a("XLwt"),r={name:"EChartsMap",props:["option"],watch:{option:function(t){this.myChart.setOption(t)}},data:function(){return{myChart:null}},mounted:function(){this.draw()},methods:{draw:function(){this.myChart=i.init(this.$el),this.myChart.setOption({bmap:{center:[114.03,22.32],zoom:10,roam:!0,mapStyle:n.a.state.mapStyle}})}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"bmap"})},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(t){a("eHsE")},"data-v-72b8a829",null);e.a=o.exports},o84s:function(t,e){}});
//# sourceMappingURL=4.57f8bcf24e6bbdb3bcff.js.map
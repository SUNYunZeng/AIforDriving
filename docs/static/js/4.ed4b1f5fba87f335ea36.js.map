{"version":3,"sources":["webpack:///src/views/Trajectory.vue","webpack:///./src/views/Trajectory.vue?558f","webpack:///./src/views/Trajectory.vue","webpack:///src/components/commom/EChartsMap.vue","webpack:///./src/components/commom/EChartsMap.vue?3422","webpack:///./src/components/commom/EChartsMap.vue"],"names":["Trajectory","name","data","user","time_range","bmap","center","store","state","mapconfig","boundingCoords","zoom","roam","mapStyle","myChart","option","this","tooltip","trigger","series","lines_option","type","coordinateSystem","polyline","silent","lineStyle","normal","opacity","width","progressiveThreshold","progressive","lines_state","effect","constantSpeed","show","trailLength","symbolSize","zlevel","methods","_this","$isOnServer","Object","myAjax","rowName","time","tableName","then","length","lines","traj_handler","draw","$Message","info","RECORDS","basket","record","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","value","tmp_date","Date","push","err","return","mounted","components","EChartsMap","views_Trajectory","render","_vm","_h","$createElement","_c","_self","ref","attrs","inline","_v","staticStyle","clearable","model","callback","$$v","expression","disabled","start-date","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","echarts","props","watch","_option","setOption","init","$el","commom_EChartsMap","staticClass"],"mappings":"mMA8BAA,GACAC,KAAA,aACAC,KAFA,WAGA,OACAC,KAAA,QACAC,YAAA,6CACAC,MACAC,OAAAC,EAAA,EAAAC,MAAAC,UAAAH,OACAI,kBACAC,KAAA,GACAC,MAAA,EACAC,SAAAN,EAAA,EAAAC,MAAAK,UAEAC,QAAA,KACAC,QACAV,KAAAW,KAAAX,KACAY,SACAC,QAAA,QAEAC,WAEAC,cACAC,KAAA,QACAC,iBAAA,OACAC,UAAA,EACArB,QACAsB,QAAA,EACAC,WACAC,QACAC,QAAA,GACAC,MAAA,IAGAC,qBAAA,IACAC,YAAA,KAEAC,aACAV,KAAA,QACAC,iBAAA,OACAC,UAAA,EACArB,QACAuB,WACAC,QACAE,MAAA,IAGAI,QACAC,cAAA,GACAC,MAAA,EACAC,YAAA,GACAC,WAAA,KAEAC,OAAA,KAIAC,SACAJ,KADA,WACA,IAAAK,EAAAvB,KACAA,KAAAwB,YACQC,OAAAC,EAAA,EAAAD,CAAR,eACAE,SAAA,qCACAC,KAAA5B,KAAAZ,WACAyC,UAAA7B,KAAAb,OACA2C,KAAA,SAAA5C,GACA,GAAAA,EAAA6C,OAAA,GACA,IAAAC,EAAAP,OAAAQ,EAAA,EAAAR,CAAAvC,GACAqC,EAAAW,KAAAF,QAEAT,EAAAY,SAAAC,KAAA,SAIQX,OAAAC,EAAA,EAAAD,CAAR,8BAAAK,KAAA,SAAA5C,GACA,GAAAA,EAAAmD,QAAAN,OAAA,GACA,IAAAO,KACAC,EAAArD,EAAAmD,QAFAG,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAGA,QAAAC,EAAAC,EAAAC,IAAAP,KAAAC,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,OAAAS,EAAAL,EAAAM,MACAC,EAAA,IAAAC,KAAAH,EAAA,MACAE,GAAA5B,EAAAnC,WAAA,IAAA+D,GAAA5B,EAAAnC,WAAA,IACAkD,EAAAe,KAAAJ,IANA,MAAAK,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAK,EAAAU,QAAAV,EAAAU,SAAA,WAAAd,EAAA,MAAAC,GASAnB,EAAAW,KAAAT,OAAAQ,EAAA,EAAAR,CAAAa,SAEAf,EAAAY,SAAAC,KAAA,UAKAF,KAjCA,SAiCAF,GACAhC,KAAAI,aAAAlB,KAAA8C,EAAA9C,KACAc,KAAAe,YAAA7B,KAAA8C,EAAA9C,KACAc,KAAAX,KAAAC,OAAA0C,EAAA1C,OACAU,KAAAD,QACAV,KAAAW,KAAAX,KACAY,SACAC,QAAA,QAEAC,QAAAH,KAAAI,aAAAJ,KAAAe,gBAIAyC,QAtGA,aAyGAC,YACAC,aAAA,ICrIeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA7D,KAAa8D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,QAA4BE,IAAA,aAAAC,OAAwBC,OAAA,MAAaJ,EAAA,YAAAH,EAAAQ,GAAA,kBAAAL,EAAA,UAAuDM,aAAa1D,MAAA,QAAeuD,OAAQI,UAAA,IAAeC,OAAQtB,MAAAW,EAAA,KAAAY,SAAA,SAAAC,GAA0Cb,EAAA1E,KAAAuF,GAAaC,WAAA,UAAoBX,EAAA,UAAeG,OAAOjB,MAAA,WAAiBW,EAAAQ,GAAA,WAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAA6CG,OAAOjB,MAAA,QAAA0B,UAAA5E,KAAAwB,eAA8CqC,EAAAQ,GAAA,WAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAA6CG,OAAOjB,MAAA,QAAA0B,UAAA5E,KAAAwB,eAA8CqC,EAAAQ,GAAA,WAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAA6CG,OAAOjB,MAAA,QAAA0B,UAAA5E,KAAAwB,eAA8CqC,EAAAQ,GAAA,mBAAAR,EAAAQ,GAAA,KAAAL,EAAA,YAAAA,EAAA,KAAAH,EAAAQ,GAAA,aAAAR,EAAAQ,GAAA,KAAAL,EAAA,YAAAA,EAAA,cAA+HM,aAAa1D,MAAA,SAAgBuD,OAAQU,aAAA,IAAAzB,KAAA,uBAAA/C,KAAA,iBAAoEmE,OAAQtB,MAAAW,EAAA,WAAAY,SAAA,SAAAC,GAAgDb,EAAAzE,WAAAsF,GAAmBC,WAAA,iBAA0B,GAAAd,EAAAQ,GAAA,KAAAL,EAAA,YAAAA,EAAA,UAA8CG,OAAO9D,KAAA,WAAiByE,IAAKC,MAAAlB,EAAA3C,QAAkB2C,EAAAQ,GAAA,gBAAAR,EAAAQ,GAAA,KAAAL,EAAA,cAAsDG,OAAOpE,OAAA8D,EAAA9D,WAAqB,IAE/oCiF,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEnG,EACA2E,GATF,EAVA,SAAAyB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,gFCpBhCK,EAAAJ,EAAA,QACAxB,GACAzE,KAAA,aACAsG,OAAA,UACAC,OACAzF,OAAA,SAAA0F,GACAzF,KAAAF,QAAA4F,UAAAD,KAGAvG,KARA,WASA,OACAY,QAAA,OAGA0D,QAbA,WAcAxD,KAAAkC,QAEAZ,SACAY,KADA,WAEAlC,KAAAF,QAAAwF,EAAAK,KAAA3F,KAAA4F,KACA5F,KAAAF,QAAA4F,WACArG,MACAC,QAAA,cACAK,KAAA,GACAC,MAAA,EACAC,SAAAN,EAAA,EAAAC,MAAAK,eC5BegG,GADEjC,OAFjB,WAA0B,IAAaE,EAAb9D,KAAa+D,eAAkD,OAA/D/D,KAAuCiE,MAAAD,IAAAF,GAAwB,OAAiBgC,YAAA,UAEzFd,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEzB,EACAmC,GATF,EAVA,SAAAT,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,EAAAJ,EAAiB","file":"static/js/4.ed4b1f5fba87f335ea36.js","sourcesContent":["<template>\n  <div>\n    <Form ref=\"formInline\" inline>\n      <FormItem>\n        测试用户: <Select v-model=\"user\" clearable style=\"width:70px\">\n        <Option value=\"user1\">User1</Option>\n        <Option value=\"user2\" :disabled=\"!this.$isOnServer\">User2</Option>\n        <Option value=\"user3\" :disabled=\"!this.$isOnServer\">User3</Option>\n        <Option value=\"user4\" :disabled=\"!this.$isOnServer\">User4</Option>\n      </Select>\n      </FormItem>\n      <FormItem><b>出发时间:</b></FormItem>\n      <FormItem>\n        <DatePicker v-model=\"time_range\" :start-date=\"new Date('2018-01-01 00:00:00')\" type=\"datetimerange\"\n                    style=\"width: 300px\"></DatePicker>\n      </FormItem>\n      <FormItem>\n        <Button type=\"primary\" @click=\"show\">展示</Button>\n      </FormItem>\n    </Form>\n    <EChartsMap :option=\"option\"></EChartsMap>\n  </div>\n</template>\n\n<script>\n  import EChartsMap from '@/components/commom/EChartsMap';\n  import {lines_factory} from '@/utils/traj-handler';\n  import {post, get} from '@/utils/myAjax';\n  import store from '@/store';\n\n  export default {\n    name: 'trajectory',\n    data () {\n      return {\n        user: 'user1',\n        time_range: ['2018-01-01 00:00:00', '2018-01-31:00:00:00'],\n        bmap: {\n          center: store.state.mapconfig.center,\n          boundingCoords: [],\n          zoom: 12,\n          roam: true,\n          mapStyle: store.state.mapStyle\n        },\n        myChart: null,\n        option: {\n          bmap: this.bmap,\n          tooltip: {\n            trigger: 'item'\n          },\n          series: []\n        },\n        lines_option: {\n          type: 'lines',\n          coordinateSystem: 'bmap',\n          polyline: true,\n          data: [],\n          silent: true,\n          lineStyle: {\n            normal: {\n              opacity: 0.6,\n              width: 1\n            }\n          },\n          progressiveThreshold: 500,\n          progressive: 200\n        },\n        lines_state: {\n          type: 'lines',\n          coordinateSystem: 'bmap',\n          polyline: true,\n          data: [],\n          lineStyle: {\n            normal: {\n              width: 0\n            }\n          },\n          effect: {\n            constantSpeed: 20,\n            show: true,\n            trailLength: 0.1,\n            symbolSize: 1.5\n          },\n          zlevel: 1\n        },\n      };\n    },\n    methods: {\n      show () {\n        if (this.$isOnServer) {\n          post('searchByRow', {\n            rowName: ['lngs', 'lats', 'line_id', 'norm_dict'],\n            time: this.time_range,\n            tableName: this.user\n          }).then(data => {\n            if (data.length > 0) {\n              let lines = lines_factory(data);\n              this.draw(lines);\n            } else {\n              this.$Message.info('空数据');\n            }\n          });\n        } else {\n          get('../static/data/user_1.json').then(data => {\n            if (data.RECORDS.length > 0) {\n              let basket = [];\n              let record = data.RECORDS;\n              for (let item of record) {\n                let tmp_date = new Date(item['time']);\n                if(tmp_date>=this.time_range[0] && tmp_date<= this.time_range[1]){\n                  basket.push(item);\n                }\n              }\n              this.draw(lines_factory(basket));\n            } else {\n              this.$Message.info('空数据');\n            }\n          });\n        }\n      },\n      draw (lines) {\n        this.lines_option.data = lines.data;\n        this.lines_state.data = lines.data;\n        this.bmap.center = lines.center;\n        this.option = {\n          bmap: this.bmap,\n          tooltip: {\n            trigger: 'item'\n          },\n          series: [this.lines_option, this.lines_state]\n        };\n      }\n    },\n    mounted () {\n\n    },\n    components: {\n      EChartsMap\n    }\n  };\n</script>\n\n<style scoped>\n  #tChart {\n    width: 100%;\n    height: calc(88vh);\n    position: relative;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Trajectory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"formInline\",attrs:{\"inline\":\"\"}},[_c('FormItem',[_vm._v(\"\\n      测试用户: \"),_c('Select',{staticStyle:{\"width\":\"70px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.user),callback:function ($$v) {_vm.user=$$v},expression:\"user\"}},[_c('Option',{attrs:{\"value\":\"user1\"}},[_vm._v(\"User1\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user2\",\"disabled\":!this.$isOnServer}},[_vm._v(\"User2\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user3\",\"disabled\":!this.$isOnServer}},[_vm._v(\"User3\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"user4\",\"disabled\":!this.$isOnServer}},[_vm._v(\"User4\")])],1)],1),_vm._v(\" \"),_c('FormItem',[_c('b',[_vm._v(\"出发时间:\")])]),_vm._v(\" \"),_c('FormItem',[_c('DatePicker',{staticStyle:{\"width\":\"300px\"},attrs:{\"start-date\":new Date('2018-01-01 00:00:00'),\"type\":\"datetimerange\"},model:{value:(_vm.time_range),callback:function ($$v) {_vm.time_range=$$v},expression:\"time_range\"}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.show}},[_vm._v(\"展示\")])],1)],1),_vm._v(\" \"),_c('EChartsMap',{attrs:{\"option\":_vm.option}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-03b36864\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Trajectory.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-03b36864\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Trajectory.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Trajectory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Trajectory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-03b36864\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Trajectory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-03b36864\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Trajectory.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"bmap\"></div>\n</template>\n\n<script>\n  import store from '@/store';\n  let echarts = require('echarts');\n  export default {\n    name: 'EChartsMap',\n    props: ['option'],\n    watch:{\n      option: function (option) {\n        this.myChart.setOption(option);\n      }\n    },\n    data(){\n      return {\n        myChart: null\n      }\n    },\n    mounted(){\n      this.draw();\n    },\n    methods: {\n      draw () {\n        this.myChart = echarts.init(this.$el);\n        this.myChart.setOption({\n          bmap:{\n            center: [114.03, 22.32],\n            zoom: 10,\n            roam: true,\n            mapStyle: store.state.mapStyle\n          }});\n      },\n    }\n  };\n</script>\n\n<style scoped>\n.bmap{\n  width: 100%;\n  height: calc(78vh);\n  position: relative;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/commom/EChartsMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bmap\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-72b8a829\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/commom/EChartsMap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-72b8a829\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EChartsMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EChartsMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EChartsMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72b8a829\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EChartsMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-72b8a829\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/commom/EChartsMap.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}